const translations = {
  de: {
    "page.title": "Kaliningrad Immobilienbegleitung",
    "brand.name": "Kaliningrad Immobilienbegleitung",
    "language.switcherLabel": "Sprache",
    "nav.menu": "Menü",
    "nav.close": "Schließen",
    "nav.home": "Start",
    "nav.about": "Über uns",
    "nav.services": "Leistungen",
    "nav.team": "Team",
    "nav.faq": "FAQ",
    "nav.contact": "Kontakt",
    "nav.cta": "Beratung buchen",
    "contact.phoneLabel": "Telefon",
    "contact.phoneValue": "+49 30 123 4567",
    "contact.emailLabel": "E-Mail",
    "contact.emailValue": "info@kaliningrad-immobilien.de",
    "contact.hoursLabel": "Sprechzeiten",
    "contact.hoursValue": "Montag – Freitag, 09:00 – 18:00 Uhr",
    "contact.addressLabel": "Standort",
    "contact.addressValue": "Kaliningrader Gebiet, Russische Föderation",
    "contactSection.heading": "Kontakt aufnehmen",
    "contactSection.subtitle": "Wir beantworten Anfragen werktags innerhalb von 24 Stunden.",
    "contactSection.whatsappLabel": "WhatsApp-Chat öffnen",
    "contactSection.telegramLabel": "Telegram-Nachricht senden",
    "contactSection.linkedinLabel": "LinkedIn-Profil öffnen",
    "contactSection.youtubeLabel": "YouTube-Kanal öffnen",
    "contactInfo.heading": "Ihr direkter Draht zu uns",
    "contactInfo.text": "Kontaktieren Sie uns für eine erste Einschätzung Ihres Vorhabens.",
    "hero.title": "Verlässliche Immobilienunterstützung im Kaliningrader Gebiet",
    "hero.subtitle": "Wir begleiten Sie durch jeden Schritt Ihrer Immobilieninvestition – vom ersten Vertrag bis zur sicheren Übergabe.",
    "hero.point1": "Verständliche Beratung für deutsche und europäische Klient:innen",
    "hero.point2": "Prüfung und Erstellung rechtssicherer Kaufunterlagen",
    "hero.point3": "Betreuung vor Ort mit lokalen Expert:innen",
    "hero.button": "Beratung anfordern",
    "hero.secondaryButton": "Leistungen entdecken",
    "about.heading": "Über uns",
    "about.subtitle": "Wir verbinden deutsche Gründlichkeit mit lokaler Marktkenntnis für sichere Investitionen.",
    "about.paragraph1": "Unser spezialisiertes Team verbindet deutsches Serviceverständnis mit lokaler Expertise im Kaliningrader Gebiet.",
    "about.paragraph2": "Wir arbeiten transparent, erklären jeden Schritt verständlich und halten Sie stets auf dem Laufenden.",
    "about.listTitle": "Was uns auszeichnet",
    "about.point1": "Mehrsprachige Fachleute mit Erfahrung in EU-Russland-Transaktionen",
    "about.point2": "Klares Kostenmodell ohne versteckte Gebühren",
    "about.point3": "Persönliche Betreuung – telefonisch, online oder vor Ort",
    "achievements.metric1.title": "125+ begleitete Kaufabschlüsse",
    "achievements.metric1.text": "Von der ersten Anfrage bis zur Schlüsselübergabe – zuverlässig und transparent.",
    "achievements.metric2.title": "48h Dokumenten-Check",
    "achievements.metric2.text": "Rechtliche Prüfung kritischer Unterlagen innerhalb von zwei Werktagen.",
    "achievements.metric3.title": "98% Weiterempfehlung",
    "achievements.metric3.text": "Unsere Kund:innen schätzen klare Kommunikation und planbare Abläufe.",
    "services.heading": "Unsere Leistungen",
    "services.intro": "Wir übernehmen die vollständige Vorbereitung Ihrer Immobilientransaktion.",
    "services.contract.title": "Vertragsvorbereitung",
    "services.contract.text": "Ausarbeitung und Prüfung von Kauf- und Mietverträgen nach deutschen und russischen Standards.",
    "services.documents.title": "Dokumentenservice",
    "services.documents.text": "Beschaffung und Übersetzung aller notwendigen Unterlagen für Behörden und Banken.",
    "services.transaction.title": "Transaktionsbetreuung",
    "services.transaction.text": "Koordination mit Eigentümer:innen, Notar:innen und Behörden bis zum erfolgreichen Abschluss.",
    "services.dueDiligence.title": "Due-Diligence-Analyse",
    "services.dueDiligence.text": "Risikoprüfung, Standortbewertung und Wirtschaftlichkeitsanalysen für informierte Entscheidungen.",
    "team.heading": "Unser Team",
    "team.subtitle": "Interdisziplinäre Spezialist:innen begleiten Sie in allen Phasen der Immobilienabwicklung.",
    "team.member1.name": "Anna Schneider",
    "team.member1.role": "Leitung Recht & Compliance",
    "team.member1.bio": "Spezialisiert auf deutsch-russische Vertragsstrukturen und sichere Kaufabwicklungen.",
    "team.member2.name": "Dmitri Ivanov",
    "team.member2.role": "Standortleitung Kaliningrad",
    "team.member2.bio": "Koordiniert Behördenkontakte, Objektprüfungen und lokale Expert:innen.",
    "team.member3.name": "Lena Vogt",
    "team.member3.role": "Kundenerfolg & Übersetzungen",
    "team.member3.bio": "Sorgt für klare Abstimmungen, Terminplanung und mehrsprachige Kommunikation.",
    "faq.heading": "Häufige Fragen",
    "faq.subtitle": "Antworten auf die wichtigsten Fragen zum Kaufprozess im Kaliningrader Gebiet.",
    "faq.q1.question": "Wie lange dauert die Vorbereitung eines Kaufvertrags?",
    "faq.q1.answer": "In der Regel benötigen wir nach Eingang aller Unterlagen drei bis fünf Werktage für die rechtliche Prüfung und Anpassung.",
    "faq.q2.question": "Unterstützen Sie auch bei Finanzierungsfragen?",
    "faq.q2.answer": "Ja. Wir koordinieren auf Wunsch die Kommunikation mit Banken und bereiten alle notwendigen Unterlagen in deutscher und russischer Sprache vor.",
    "faq.q3.question": "Kann ich den Service vollständig aus Deutschland nutzen?",
    "faq.q3.answer": "Selbstverständlich. Viele Prozesse können wir digital abbilden, inklusive Videobesichtigungen und notariell beglaubigter Vollmachten.",
    "consult.heading": "Beratung anfordern",
    "consult.description": "Senden Sie uns Ihre Kontaktdaten und kurze Angaben zum Objekt. Wir melden uns werktags innerhalb von 24 Stunden.",
    "consult.form.nameLabel": "Name",
    "consult.form.namePlaceholder": "Ihr vollständiger Name",
    "consult.form.emailLabel": "E-Mail",
    "consult.form.emailPlaceholder": "Ihre E-Mail-Adresse",
    "consult.form.phoneLabel": "Telefon",
    "consult.form.phonePlaceholder": "Ihre Telefonnummer",
    "consult.form.messageLabel": "Nachricht",
    "consult.form.messagePlaceholder": "Beschreiben Sie Ihr Anliegen oder das Objekt.",
    "consult.form.consent": "Ich stimme der Verarbeitung meiner Daten zum Zweck der Kontaktaufnahme zu.",
    "consult.form.submit": "Nachricht senden",
    "consult.form.success": "Vielen Dank! Wir melden uns in Kürze.",
    "consult.form.error": "Bitte füllen Sie alle Pflichtfelder korrekt aus.",
    "theme.switchToDark": "Dunkles Design",
    "theme.switchToLight": "Helles Design",
    "footer.rights": "© Kaliningrad Immobilienbegleitung. Alle Rechte vorbehalten."
  },
  en: {
    "page.title": "Kaliningrad Real Estate Support",
    "brand.name": "Kaliningrad Real Estate Support",
    "language.switcherLabel": "Language",
    "nav.menu": "Menu",
    "nav.close": "Close",
    "nav.home": "Home",
    "nav.about": "About",
    "nav.services": "Services",
    "nav.team": "Team",
    "nav.faq": "FAQ",
    "nav.contact": "Contact",
    "nav.cta": "Book a consultation",
    "contact.phoneLabel": "Phone",
    "contact.phoneValue": "+49 30 123 4567",
    "contact.emailLabel": "Email",
    "contact.emailValue": "info@kaliningrad-immobilien.de",
    "contact.hoursLabel": "Office hours",
    "contact.hoursValue": "Monday – Friday, 9:00 – 18:00",
    "contact.addressLabel": "Location",
    "contact.addressValue": "Kaliningrad region, Russian Federation",
    "contactSection.heading": "Get in touch",
    "contactSection.subtitle": "We respond to enquiries within one business day.",
    "contactSection.whatsappLabel": "Open WhatsApp chat",
    "contactSection.telegramLabel": "Message us on Telegram",
    "contactSection.linkedinLabel": "Open LinkedIn profile",
    "contactSection.youtubeLabel": "Open YouTube channel",
    "contactInfo.heading": "Your direct line to us",
    "contactInfo.text": "Get in touch for an initial assessment of your plans.",
    "hero.title": "Reliable real estate assistance in the Kaliningrad region",
    "hero.subtitle": "We accompany you through every step of your property investment – from the first draft to a safe handover.",
    "hero.point1": "Clear guidance for clients from Germany and across the EU",
    "hero.point2": "Drafting and reviewing compliant purchase documentation",
    "hero.point3": "On-site coordination with trusted local specialists",
    "hero.button": "Request consultation",
    "hero.secondaryButton": "Explore services",
    "about.heading": "About us",
    "about.subtitle": "We combine German precision with local market expertise for secure investments.",
    "about.paragraph1": "Our dedicated team combines German-quality service with local expertise in the Kaliningrad region.",
    "about.paragraph2": "We keep the process transparent, explain every step in plain language, and keep you informed.",
    "about.listTitle": "Why clients choose us",
    "about.point1": "Multilingual professionals experienced in EU–Russia transactions",
    "about.point2": "Clear pricing with no hidden fees",
    "about.point3": "Personal support – by phone, online, or on location",
    "achievements.metric1.title": "125+ completed transactions",
    "achievements.metric1.text": "From initial enquiry to handover – reliable and transparent.",
    "achievements.metric2.title": "48-hour document review",
    "achievements.metric2.text": "Legal assessment of critical paperwork within two business days.",
    "achievements.metric3.title": "98% client referrals",
    "achievements.metric3.text": "Clients value our clear communication and predictable processes.",
    "services.heading": "What we do",
    "services.intro": "We take care of the complete preparation of your property transaction.",
    "services.contract.title": "Contract preparation",
    "services.contract.text": "Drafting and verifying purchase and rental contracts compliant with German and Russian regulations.",
    "services.documents.title": "Documentation",
    "services.documents.text": "Collecting and translating all required papers for authorities and financial institutions.",
    "services.transaction.title": "Transaction support",
    "services.transaction.text": "Coordinating with owners, notaries, and authorities until the deal is successfully closed.",
    "services.dueDiligence.title": "Due diligence analysis",
    "services.dueDiligence.text": "Risk assessment, site evaluation, and feasibility studies for informed decisions.",
    "team.heading": "Our team",
    "team.subtitle": "A multidisciplinary team guides you through every project phase.",
    "team.member1.name": "Anna Schneider",
    "team.member1.role": "Head of Legal & Compliance",
    "team.member1.bio": "Specialist in German-Russian contract structures and secure closings.",
    "team.member2.name": "Dmitri Ivanov",
    "team.member2.role": "Kaliningrad Operations Lead",
    "team.member2.bio": "Coordinates local experts, site inspections, and authority relations.",
    "team.member3.name": "Lena Vogt",
    "team.member3.role": "Client Success & Translations",
    "team.member3.bio": "Ensures clear timelines, scheduling, and multilingual communication.",
    "faq.heading": "Frequently asked questions",
    "faq.subtitle": "Straight answers about buying property in the Kaliningrad region.",
    "faq.q1.question": "How long does contract preparation take?",
    "faq.q1.answer": "Once we have all documents, we usually complete the legal review and adjustments within three to five business days.",
    "faq.q2.question": "Do you assist with financing?",
    "faq.q2.answer": "Yes. We coordinate with banks on request and prepare all documents in German and Russian.",
    "faq.q3.question": "Can I complete the process from abroad?",
    "faq.q3.answer": "Absolutely. Most steps can be handled remotely, including video tours and notarised powers of attorney.",
    "consult.heading": "Request a consultation",
    "consult.description": "Share your contact details and a short description of the property. We respond within one business day.",
    "consult.form.nameLabel": "Name",
    "consult.form.namePlaceholder": "Your full name",
    "consult.form.emailLabel": "Email",
    "consult.form.emailPlaceholder": "Your email address",
    "consult.form.phoneLabel": "Phone",
    "consult.form.phonePlaceholder": "Your phone number",
    "consult.form.messageLabel": "Message",
    "consult.form.messagePlaceholder": "Describe your request or property details.",
    "consult.form.consent": "I agree that my data will be used to process this consultation request.",
    "consult.form.submit": "Send message",
    "consult.form.success": "Thank you! We will contact you shortly.",
    "consult.form.error": "Please complete all required fields correctly.",
    "theme.switchToDark": "Enable dark mode",
    "theme.switchToLight": "Enable light mode",
    "footer.rights": "© Kaliningrad Real Estate Support. All rights reserved."
  }
};

const EU_COUNTRIES = new Set([
  "AT",
  "BE",
  "BG",
  "HR",
  "CY",
  "CZ",
  "DK",
  "EE",
  "FI",
  "FR",
  "DE",
  "GR",
  "HU",
  "IE",
  "IT",
  "LV",
  "LT",
  "LU",
  "MT",
  "NL",
  "PL",
  "PT",
  "RO",
  "SK",
  "SI",
  "ES",
  "SE"
]);

const NAV_OPEN_CLASS = "is-open";
const BODY_NAV_OPEN_CLASS = "nav-open";
const SITE_HEADER_SCROLLED_CLASS = "is-scrolled";
const THEME_STORAGE_KEY = "preferred-theme";
const SCROLL_THRESHOLD = 24;

let currentLanguage = "de";
let manualLanguageSelection = false;
let currentTheme = "light";

const languageButtons = () => document.querySelectorAll(".language-button");
const formElement = () => document.querySelector("#consultation-form");
const formResponseElement = () => document.querySelector("#form-response");
const navToggleElement = () => document.querySelector("[data-nav-toggle]");
const primaryNavElement = () => document.querySelector(".primary-nav");
const themeToggleElement = () => document.querySelector("[data-theme-toggle]");
const faqQuestionElements = () => document.querySelectorAll(".faq-question");
const siteHeaderElement = () => document.querySelector(".site-header");

function updateLanguage(lang, { manual = false } = {}) {
  if (!translations[lang]) {
    lang = "de";
  }
  currentLanguage = lang;
  if (manual) {
    manualLanguageSelection = true;
  }
  document.documentElement.lang = lang;
  applyTranslations(lang);
  updateDocumentTitle(lang);
  updateLanguageButtons(lang);
}

function applyTranslations(lang) {
  const dictionary = translations[lang];
  if (!dictionary) {
    return;
  }

  document.querySelectorAll("[data-i18n]").forEach((element) => {
    const key = element.dataset.i18n;
    const translation = dictionary[key];
    if (translation) {
      element.textContent = translation;
    }
  });

  document.querySelectorAll("[data-i18n-placeholder]").forEach((element) => {
    const key = element.dataset.i18nPlaceholder;
    const translation = dictionary[key];
    if (translation) {
      element.setAttribute("placeholder", translation);
    }
  });

  document.querySelectorAll("[data-i18n-aria-label]").forEach((element) => {
    const key = element.dataset.i18nAriaLabel;
    const translation = dictionary[key];
    if (translation) {
      element.setAttribute("aria-label", translation);
    }
  });

  const responseEl = formResponseElement();
  if (responseEl && responseEl.dataset.messageType) {
    const responseKey = responseEl.dataset.messageType === "success" ? "consult.form.success" : "consult.form.error";
    const translation = dictionary[responseKey];
    if (translation) {
      responseEl.textContent = translation;
    }
  }

  updateThemeToggleLabel();
  setNavToggleLabel(navToggleElement()?.getAttribute("aria-expanded") === "true");
}

function updateDocumentTitle(lang) {
  const dictionary = translations[lang];
  if (dictionary && dictionary["page.title"]) {
    document.title = dictionary["page.title"];
  }
}

function updateLanguageButtons(activeLang) {
  languageButtons().forEach((button) => {
    const isActive = button.dataset.lang === activeLang;
    button.setAttribute("aria-pressed", String(isActive));
  });
}

function detectLanguage(fallbackLang) {
  if (!window.fetch || manualLanguageSelection) {
    return;
  }

  fetch("https://ipapi.co/json/")
    .then((response) => (response.ok ? response.json() : null))
    .then((data) => {
      if (!data || manualLanguageSelection) {
        return;
      }
      let detectedLanguage = fallbackLang;
      const countryCode = (data.country_code || "").toUpperCase();
      if (countryCode === "DE") {
        detectedLanguage = "de";
      } else if (EU_COUNTRIES.has(countryCode)) {
        detectedLanguage = "en";
      }
      updateLanguage(detectedLanguage);
    })
    .catch(() => {
      /* silent fallback */
    });
}

function handleFormSubmission() {
  const form = formElement();
  const responseEl = formResponseElement();
  if (!form || !responseEl) {
    return;
  }

  const clearMessage = () => {
    responseEl.textContent = "";
    responseEl.classList.remove("success", "error");
    delete responseEl.dataset.messageType;
  };

  const showMessage = (type) => {
    const key = type === "success" ? "consult.form.success" : "consult.form.error";
    const dictionary = translations[currentLanguage];
    const message = dictionary[key];
    responseEl.textContent = message || "";
    responseEl.classList.remove("success", "error");
    responseEl.classList.add(type);
    responseEl.dataset.messageType = type;
  };

  form.addEventListener("submit", (event) => {
    event.preventDefault();

    const fields = form.querySelectorAll("input, textarea");
    let hasErrors = false;

    fields.forEach((field) => {
      if (!field.checkValidity()) {
        field.classList.add("error");
        hasErrors = true;
      } else {
        field.classList.remove("error");
      }
    });

    if (hasErrors) {
      form.reportValidity();
      showMessage("error");
      return;
    }

    showMessage("success");
    form.reset();
  });

  form.addEventListener("input", (event) => {
    const target = event.target;
    if (!(target instanceof HTMLInputElement || target instanceof HTMLTextAreaElement)) {
      return;
    }
    if (target.classList.contains("error") && target.checkValidity()) {
      target.classList.remove("error");
    }
    if (responseEl.dataset.messageType === "error") {
      clearMessage();
    }
  });
}

function setNavToggleLabel(isOpen) {
  const button = navToggleElement();
  if (!button) {
    return;
  }
  const label = button.querySelector(".nav-toggle__label");
  const dictionary = translations[currentLanguage];
  const key = isOpen ? "nav.close" : "nav.menu";
  const text = dictionary[key];

  if (label) {
    label.dataset.i18n = key;
    if (text) {
      label.textContent = text;
    }
  }

  button.dataset.i18nAriaLabel = key;
  if (text) {
    button.setAttribute("aria-label", text);
  }
}

function openNav() {
  const button = navToggleElement();
  const nav = primaryNavElement();
  if (!button || !nav) {
    return;
  }
  nav.classList.add(NAV_OPEN_CLASS);
  document.body.classList.add(BODY_NAV_OPEN_CLASS);
  button.setAttribute("aria-expanded", "true");
  setNavToggleLabel(true);
}

function closeNav({ silent = false } = {}) {
  const button = navToggleElement();
  const nav = primaryNavElement();
  if (!button || !nav) {
    return;
  }
  nav.classList.remove(NAV_OPEN_CLASS);
  document.body.classList.remove(BODY_NAV_OPEN_CLASS);
  button.setAttribute("aria-expanded", "false");
  setNavToggleLabel(false);
  if (!silent) {
    button.focus();
  }
}

function toggleNav() {
  const nav = primaryNavElement();
  if (!nav) {
    return;
  }
  if (nav.classList.contains(NAV_OPEN_CLASS)) {
    closeNav();
  } else {
    openNav();
  }
}

function setupNavigation() {
  const button = navToggleElement();
  const nav = primaryNavElement();
  if (!button || !nav) {
    return;
  }

  button.addEventListener("click", () => {
    toggleNav();
  });

  nav.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      const mediaQuery = window.matchMedia("(max-width: 767px)");
      if (mediaQuery.matches) {
        closeNav({ silent: true });
      }
    });
  });

  document.addEventListener("keydown", (event) => {
    if (event.key === "Escape") {
      closeNav({ silent: true });
    }
  });

  const mq = window.matchMedia("(min-width: 768px)");
  const handleChange = (event) => {
    if (event.matches) {
      closeNav({ silent: true });
    }
  };
  if (mq.addEventListener) {
    mq.addEventListener("change", handleChange);
  } else if (mq.addListener) {
    mq.addListener(handleChange);
  }
}

function updateThemeToggleLabel() {
  const button = themeToggleElement();
  if (!button) {
    return;
  }
  const label = button.querySelector(".theme-toggle__label");
  const dictionary = translations[currentLanguage];
  const isDark = currentTheme === "dark";
  const key = isDark ? "theme.switchToLight" : "theme.switchToDark";
  const text = dictionary[key];

  button.dataset.i18nAriaLabel = key;
  button.setAttribute("aria-pressed", String(isDark));
  if (text) {
    button.setAttribute("aria-label", text);
  }

  if (label) {
    label.dataset.i18n = key;
    if (text) {
      label.textContent = text;
    }
  }
}

function setTheme(theme, { persist = true } = {}) {
  if (theme !== "dark" && theme !== "light") {
    theme = "light";
  }
  currentTheme = theme;
  document.body.dataset.theme = theme;
  document.documentElement.style.colorScheme = theme;
  updateThemeToggleLabel();
  if (persist) {
    try {
      localStorage.setItem(THEME_STORAGE_KEY, theme);
    } catch (error) {
      /* ignore storage errors */
    }
  }
}

function detectPreferredTheme() {
  try {
    const stored = localStorage.getItem(THEME_STORAGE_KEY);
    if (stored === "dark" || stored === "light") {
      return stored;
    }
  } catch (error) {
    /* ignore storage errors */
  }
  if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
    return "dark";
  }
  return "light";
}

function setupThemeToggle() {
  const button = themeToggleElement();
  if (!button) {
    return;
  }

  button.addEventListener("click", () => {
    const nextTheme = currentTheme === "dark" ? "light" : "dark";
    setTheme(nextTheme);
  });

  if (window.matchMedia) {
    const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
    const handleChange = (event) => {
      try {
        const stored = localStorage.getItem(THEME_STORAGE_KEY);
        if (stored === "dark" || stored === "light") {
          return;
        }
      } catch (error) {
        /* ignore storage errors */
      }
      setTheme(event.matches ? "dark" : "light", { persist: false });
    };
    if (mediaQuery.addEventListener) {
      mediaQuery.addEventListener("change", handleChange);
    } else if (mediaQuery.addListener) {
      mediaQuery.addListener(handleChange);
    }
  }
}

function updateHeaderShadow() {
  const header = siteHeaderElement();
  if (!header) {
    return;
  }
  const isScrolled = window.scrollY > SCROLL_THRESHOLD;
  header.classList.toggle(SITE_HEADER_SCROLLED_CLASS, isScrolled);
}

function setupScrollObserver() {
  updateHeaderShadow();
  window.addEventListener("scroll", updateHeaderShadow);
}

function setupFaq() {
  faqQuestionElements().forEach((button) => {
    const answerId = button.dataset.faqControl;
    const answer = answerId ? document.getElementById(answerId) : null;
    if (!answer) {
      return;
    }

    button.addEventListener("click", () => {
      const isExpanded = button.getAttribute("aria-expanded") === "true";
      button.setAttribute("aria-expanded", String(!isExpanded));
      answer.classList.toggle("active", !isExpanded);
    });
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const preferredTheme = detectPreferredTheme();
  setTheme(preferredTheme, { persist: false });
  setupThemeToggle();

  const userLanguage = (navigator.language || navigator.userLanguage || "").toLowerCase();
  const fallbackLanguage = userLanguage.startsWith("de") ? "de" : "en";

  updateLanguage(fallbackLanguage);
  detectLanguage(fallbackLanguage);
  handleFormSubmission();
  setupNavigation();
  setupFaq();
  setupScrollObserver();

  languageButtons().forEach((button) => {
    button.addEventListener("click", () => {
      const selectedLang = button.dataset.lang;
      updateLanguage(selectedLang, { manual: true });
    });
  });
});
